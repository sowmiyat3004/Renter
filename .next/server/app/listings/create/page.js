(()=>{var e={};e.id=171,e.ids=[171],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},37834:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),t(26887),t(4496),t(35866);var a=t(23191),r=t(88716),i=t(37922),l=t.n(i),n=t(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let c=["",{children:["listings",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,26887)),"/Users/sowmiya/Renter/Renter/app/listings/create/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4496)),"/Users/sowmiya/Renter/Renter/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/sowmiya/Renter/Renter/app/listings/create/page.tsx"],m="/listings/create/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/listings/create/page",pathname:"/listings/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},51834:(e,s,t)=>{Promise.resolve().then(t.bind(t,69586))},69586:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var a=t(10326),r=t(17577),i=t(77109),l=t(35047),n=t(74723),o=t(74064),c=t(34143),d=t(40381),m=t(62881);let x=(0,m.Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var p=t(50704),u=t(42298);let h=(0,m.Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),g=(0,m.Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var b=t(90434),y=t(30015);function j({label:e,value:s,onChange:t,id:i,name:l,placeholder:n,disabled:o=!1,required:c=!1}){let[d,m]=(0,r.useState)("");return(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:i||l,className:"block text-sm font-medium leading-6 text-gray-900",children:e}),(0,a.jsxs)("div",{className:"relative mt-2 rounded-md shadow-sm",children:[a.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:a.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),a.jsx("input",{type:"text",id:i||l,name:l,className:"block w-full rounded-md border-0 py-1.5 pl-7 pr-12 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:n||"0.00",value:d,onChange:e=>{let s=e.target.value;m(s);let a=parseFloat(s.replace(/₹|,/g,"").trim());isNaN(a)?t(void 0):t(a)},onBlur:()=>{null!=s?m(new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:2}).format(s)):m("")},disabled:o,required:c}),a.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:a.jsx("span",{className:"text-gray-500 sm:text-sm",id:"price-currency",children:"INR"})})]})]})}function f(){let{data:e,status:s}=(0,i.useSession)(),t=(0,l.useRouter)(),[m,f]=(0,r.useState)(!1),[N,v]=(0,r.useState)([]),[w,R]=(0,r.useState)([]),[_,S]=(0,r.useState)([]),{register:P,handleSubmit:Z,formState:{errors:k},setValue:D,watch:C}=(0,n.cI)({resolver:(0,o.F)(c.TH)}),A=e=>{v(s=>s.filter((s,t)=>t!==e))},F=e=>{S(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},I=async e=>{if(0===N.length){d.Am.error("Please upload at least one image");return}f(!0);try{let s=new FormData;s.append("title",e.title),s.append("description",e.description),s.append("priceAmount",e.priceAmount.toString()),s.append("bedrooms",e.bedrooms.toString()),s.append("bathrooms",e.bathrooms.toString()),s.append("state",e.state),s.append("city",e.city),s.append("lat",e.lat.toString()),s.append("lng",e.lng.toString()),s.append("amenities",JSON.stringify(_)),N.forEach((e,t)=>{s.append("images",e)});let a=await fetch("/api/listings",{method:"POST",body:s}),r=await a.json();r.success?(d.Am.success("Listing created successfully! It will be reviewed by our admin team."),t.push("/dashboard")):d.Am.error(r.error||"Failed to create listing")}catch(e){d.Am.error("Something went wrong. Please try again.")}finally{f(!1)}};return"loading"===s?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"spinner h-8 w-8"})}):a.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)(b.default,{href:"/dashboard",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[a.jsx(x,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Listing"}),a.jsx("p",{className:"text-gray-600",children:"Fill in the details below to list your property"})]}),(0,a.jsxs)("form",{onSubmit:Z(I),className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Title *"}),a.jsx("input",{...P("title"),type:"text",className:`input ${k.title?"input-error":""}`,placeholder:"e.g., Beautiful 2-bedroom apartment in downtown"}),k.title&&a.jsx("p",{className:"form-error",children:String(k.title.message)})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),a.jsx("textarea",{...P("description"),rows:4,className:`input ${k.description?"input-error":""}`,placeholder:"Describe your property, its features, and what makes it special..."}),k.description&&a.jsx("p",{className:"form-error",children:String(k.description.message)})]}),a.jsx(j,{label:"Monthly Rent *",value:C("priceAmount"),onChange:e=>D("priceAmount",e||0),placeholder:"0",required:!0}),k.priceAmount&&a.jsx("p",{className:"form-error",children:String(k.priceAmount.message)}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bedrooms *"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsxs)("select",{...P("bedrooms",{valueAsNumber:!0}),className:`input pl-10 ${k.bedrooms?"input-error":""}`,children:[a.jsx("option",{value:"",children:"Select bedrooms"}),a.jsx("option",{value:0,children:"Studio"}),a.jsx("option",{value:1,children:"1"}),a.jsx("option",{value:2,children:"2"}),a.jsx("option",{value:3,children:"3"}),a.jsx("option",{value:4,children:"4"}),a.jsx("option",{value:5,children:"5+"})]})]}),k.bedrooms&&a.jsx("p",{className:"form-error",children:String(k.bedrooms.message)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bathrooms *"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsxs)("select",{...P("bathrooms",{valueAsNumber:!0}),className:`input pl-10 ${k.bathrooms?"input-error":""}`,children:[a.jsx("option",{value:"",children:"Select bathrooms"}),a.jsx("option",{value:1,children:"1"}),a.jsx("option",{value:1.5,children:"1.5"}),a.jsx("option",{value:2,children:"2"}),a.jsx("option",{value:2.5,children:"2.5"}),a.jsx("option",{value:3,children:"3"}),a.jsx("option",{value:3.5,children:"3.5"}),a.jsx("option",{value:4,children:"4+"})]})]}),k.bathrooms&&a.jsx("p",{className:"form-error",children:String(k.bathrooms.message)})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Amenities"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:w.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",value:e.id,checked:_.includes(e.id),onChange:s=>{s.target.checked?S([..._,e.id]):S(_.filter(s=>s!==e.id))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:e.name})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Location"}),(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(y.V,{label:"Location *",value:C("location"),onChange:e=>{e&&(D("city",e.name),D("state",e.state),D("lat",e.lat||0),D("lng",e.lng||0))},placeholder:"Search for city, district, or state",className:"w-full"}),(k.city||k.state)&&a.jsx("p",{className:"form-error",children:"Please select a valid location"}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address (Optional)"}),a.jsx("input",{type:"text",className:"input",placeholder:"Enter full address for better location accuracy"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This will help renters find your property more easily"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Property Photos"}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Images * (Max 1MB each)"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[a.jsx(h,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Drag and drop images here, or click to select"}),a.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{let s=Array.from(e.target.files||[]).filter(e=>!(e.size>1048576)||(d.Am.error(`${e.name} is too large. Maximum size is 1MB.`),!1));v(e=>[...e,...s])},className:"hidden",id:"image-upload"}),a.jsx("label",{htmlFor:"image-upload",className:"btn-secondary cursor-pointer",children:"Choose Images"})]})]}),N.length>0&&a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:N.map((e,s)=>(0,a.jsxs)("div",{className:"relative",children:[a.jsx("img",{src:URL.createObjectURL(e),alt:`Upload ${s+1}`,className:"w-full h-24 object-cover rounded-lg"}),a.jsx("button",{type:"button",onClick:()=>A(s),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:a.jsx(g,{className:"h-4 w-4"})})]},s))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Amenities"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:w.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-gray-50 p-3 rounded-lg border border-gray-200",children:[a.jsx("input",{type:"checkbox",checked:_.includes(e.id),onChange:()=>F(e.id),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:e.name})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[a.jsx(b.default,{href:"/dashboard",className:"btn-secondary",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:m,className:"btn-primary",children:m?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"spinner h-4 w-4 mr-2"}),"Creating Listing..."]}):"Create Listing"})]})]})]})})}},30015:(e,s,t)=>{"use strict";t.d(s,{V:()=>c});var a=t(10326),r=t(17577),i=t(64991),l=t(19661),n=t(96701),o=t(41135);function c({label:e,value:s,onChange:t,placeholder:c="Search for location...",className:d="",showAllTypes:m=!0,debounceMs:x=300}){let[p,u]=(0,r.useState)(""),[h,g]=(0,r.useState)([]),[b,y]=(0,r.useState)(!1),[j,f]=(0,r.useState)(!1),N=(0,r.useRef)(null);(0,r.useRef)();let v=e=>{u(e),f(!0),!e&&e&&t(null)},w=e=>{switch(e){case"state":return"\uD83C\uDFDB️";case"district":return"\uD83C\uDFD8️";case"city":return"\uD83C\uDFD9️";case"locality":return"\uD83C\uDFE0";default:return"\uD83D\uDCCD"}},R=e=>{switch(e){case"state":return"State";case"district":return"District";case"city":return"City";case"locality":return"Locality";default:return"Location"}};return a.jsx("div",{className:`relative ${d}`,children:(0,a.jsxs)(n.h,{as:"div",value:s,onChange:e=>{t(e),e?u(e.displayName):u(""),f(!1)},children:[a.jsx(n.h.Label,{className:"block text-sm font-medium leading-6 text-gray-900 mb-2",children:e}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(n.h.Input,{className:"w-full rounded-md border-0 bg-white py-2 pl-10 pr-10 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onChange:e=>v(e.target.value),onFocus:()=>{f(!0)},onBlur:()=>{setTimeout(()=>f(!1),200)},displayValue:e=>e?e.displayName:"",placeholder:c,ref:N}),a.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:a.jsx(i.Z,{className:"h-5 w-5 text-gray-400"})}),a.jsx(n.h.Button,{className:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none",children:a.jsx(l.Z,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),j&&(0,a.jsxs)(n.h.Options,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:[b&&a.jsx("div",{className:"relative cursor-default select-none py-2 pl-3 pr-9 text-gray-500",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-600 mr-2"}),"Searching locations..."]})}),!b&&0===h.length&&p.length>=2&&a.jsx("div",{className:"relative cursor-default select-none py-2 pl-3 pr-9 text-gray-500",children:"No locations found."}),!b&&h.length>0&&a.jsx(a.Fragment,{children:h.map(e=>a.jsx(n.h.Option,{value:e,className:({active:e})=>(0,o.Z)("relative cursor-default select-none py-2 pl-3 pr-9",e?"bg-indigo-600 text-white":"text-gray-900"),children:({active:s,selected:t})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-lg mr-2",children:w(e.type)}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("span",{className:(0,o.Z)("block truncate",t&&"font-semibold"),children:e.displayName}),(0,a.jsxs)("span",{className:(0,o.Z)("block text-xs",s?"text-indigo-200":"text-gray-500"),children:[R(e.type),e.lat&&e.lng&&(0,a.jsxs)("span",{className:"ml-2",children:["\uD83D\uDCCD ",e.lat.toFixed(4),", ",e.lng.toFixed(4)]})]})]})]}),t&&a.jsx("span",{className:(0,o.Z)("absolute inset-y-0 right-0 flex items-center pr-4",s?"text-white":"text-indigo-600"),children:"✓"})]})},e.id))})]})]})]})})}},34143:(e,s,t)=>{"use strict";t.d(s,{JJ:()=>r,TH:()=>l,wL:()=>i});var a=t(770);let r=a.Ry({name:a.Z_().min(2,"Name must be at least 2 characters"),email:a.Z_().email("Invalid email address"),password:a.Z_().min(8,"Password must be at least 8 characters"),confirmPassword:a.Z_()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),i=a.Ry({email:a.Z_().email("Invalid email address"),password:a.Z_().min(1,"Password is required")}),l=a.Ry({title:a.Z_().min(5,"Title must be at least 5 characters"),description:a.Z_().min(20,"Description must be at least 20 characters"),priceAmount:a.Rx().min(0,"Price must be positive"),bedrooms:a.Rx().min(0,"Bedrooms must be 0 or more"),bathrooms:a.Rx().min(0,"Bathrooms must be 0 or more"),state:a.Z_().min(1,"State is required"),district:a.Z_().optional(),city:a.Z_().min(1,"City is required"),locality:a.Z_().optional(),address:a.Z_().optional(),lat:a.Rx().min(-90).max(90),lng:a.Rx().min(-180).max(180),amenities:a.IX(a.Z_()).optional()});l.partial().extend({id:a.Z_()}),a.Ry({minPrice:a.Rx().optional(),maxPrice:a.Rx().optional(),bedrooms:a.Rx().optional(),bathrooms:a.Rx().optional(),amenities:a.IX(a.Z_()).optional(),lat:a.Rx().optional(),lng:a.Rx().optional(),radius:a.Rx().optional(),page:a.Rx().min(1).default(1),limit:a.Rx().min(1).max(50).default(12)}),a.Ry({listingId:a.Z_(),actionType:a.Km(["APPROVE","REJECT","SUSPEND","DELETE"]),reason:a.Z_().optional()}),a.Ry({name:a.Z_().min(2,"Name must be at least 2 characters"),email:a.Z_().email("Invalid email address"),message:a.Z_().min(10,"Message must be at least 10 characters"),listingId:a.Z_()})},26887:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/sowmiya/Renter/Renter/app/listings/create/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,498,889,677,120],()=>t(37834));module.exports=a})();
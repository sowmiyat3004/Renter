(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{5660:function(e,t,s){Promise.resolve().then(s.bind(s,8928))},8928:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(7437),a=s(2265),n=s(605),i=s(9376),l=s(7648),o=s(3121),c=s(8690),d=s(338),m=s(7233),u=s(7165);let x=a.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))});var h=s(2548),g=s(9734);function f(){var e,t,s,f;let{data:w,status:p}=(0,n.useSession)(),j=(0,i.useRouter)(),[v,y]=(0,a.useState)("notifications"),[b,N]=(0,a.useState)({emailNotifications:!0,smsNotifications:!1,listingUpdates:!0,newMessages:!0,adminAlerts:!1}),[k,E]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[C,P]=(0,a.useState)({current:!1,new:!1,confirm:!1}),[M,Z]=(0,a.useState)(!1),[L,S]=(0,a.useState)(""),[O,R]=(0,a.useState)("");(0,a.useEffect)(()=>{if("loading"!==p){if(!w){j.push("/auth/signin");return}A()}},[w,p,j]);let A=async()=>{try{let e=await fetch("/api/user/notifications"),t=await e.json();t.success&&N(t.data)}catch(e){console.error("Error fetching settings:",e)}},B=async(e,t)=>{let s={...b,[e]:t};N(s);try{let e=await fetch("/api/user/notifications",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await e.json();t.success?(S("Notification settings updated successfully"),setTimeout(()=>S(""),3e3)):(R(t.error||"Failed to update settings"),setTimeout(()=>R(""),5e3))}catch(e){console.error("Error updating notifications:",e),R("Failed to update notification settings"),setTimeout(()=>R(""),5e3)}},W=async e=>{if(e.preventDefault(),Z(!0),R(""),S(""),k.newPassword!==k.confirmPassword){R("New passwords do not match"),Z(!1);return}if(k.newPassword.length<8){R("New password must be at least 8 characters long"),Z(!1);return}try{let e=await fetch("/api/user/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:k.currentPassword,newPassword:k.newPassword})}),t=await e.json();t.success?(S("Password changed successfully"),E({currentPassword:"",newPassword:"",confirmPassword:""})):R(t.error||"Failed to change password")}catch(e){console.error("Error changing password:",e),R("Failed to change password")}finally{Z(!1)}},T=e=>{P(t=>({...t,[e]:!t[e]}))};return"loading"===p?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your account settings and preferences"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)("nav",{className:"space-y-1",children:[{id:"notifications",name:"Notifications",icon:o.Z},{id:"security",name:"Security",icon:c.Z},{id:"account",name:"Account",icon:d.Z}].map(e=>(0,r.jsxs)("button",{onClick:()=>y(e.id),className:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-md ".concat(v===e.id?"bg-indigo-100 text-indigo-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,r.jsx)(e.icon,{className:"h-5 w-5 mr-3"}),e.name]},e.id))})}),(0,r.jsxs)("div",{className:"lg:col-span-3",children:[L&&(0,r.jsxs)("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded flex items-center",children:[(0,r.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),L]}),O&&(0,r.jsxs)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded flex items-center",children:[(0,r.jsx)(u.Z,{className:"h-5 w-5 mr-2"}),O]}),"notifications"===v&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Notification Preferences"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Choose how you want to be notified about updates"})]}),(0,r.jsx)("div",{className:"px-6 py-4",children:(0,r.jsx)("div",{className:"space-y-6",children:Object.entries(b).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(o.Z,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["emailNotifications"===t&&"Receive notifications via email","smsNotifications"===t&&"Receive notifications via SMS","listingUpdates"===t&&"Get notified about your listing status changes","newMessages"===t&&"Get notified about new messages from renters","adminAlerts"===t&&"Get notified about important platform updates"]})]})]}),(0,r.jsx)("button",{onClick:()=>B(t,!s),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 ".concat(s?"bg-indigo-600":"bg-gray-200"),children:(0,r.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(s?"translate-x-6":"translate-x-1")})})]},t)})})})]}),"security"===v&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Security Settings"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your password and security preferences"})]}),(0,r.jsx)("div",{className:"px-6 py-4",children:(0,r.jsxs)("form",{onSubmit:W,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:C.current?"text":"password",value:k.currentPassword,onChange:e=>E(t=>({...t,currentPassword:e.target.value})),className:"input pr-10",placeholder:"Enter current password",required:!0}),(0,r.jsx)("button",{type:"button",onClick:()=>T("current"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:C.current?(0,r.jsx)(x,{className:"h-5 w-5 text-gray-400"}):(0,r.jsx)(h.Z,{className:"h-5 w-5 text-gray-400"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:C.new?"text":"password",value:k.newPassword,onChange:e=>E(t=>({...t,newPassword:e.target.value})),className:"input pr-10",placeholder:"Enter new password",required:!0}),(0,r.jsx)("button",{type:"button",onClick:()=>T("new"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:C.new?(0,r.jsx)(x,{className:"h-5 w-5 text-gray-400"}):(0,r.jsx)(h.Z,{className:"h-5 w-5 text-gray-400"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:C.confirm?"text":"password",value:k.confirmPassword,onChange:e=>E(t=>({...t,confirmPassword:e.target.value})),className:"input pr-10",placeholder:"Confirm new password",required:!0}),(0,r.jsx)("button",{type:"button",onClick:()=>T("confirm"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:C.confirm?(0,r.jsx)(x,{className:"h-5 w-5 text-gray-400"}):(0,r.jsx)(h.Z,{className:"h-5 w-5 text-gray-400"})})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"submit",disabled:M,className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:M?"Changing...":"Change Password"})})]})})]}),"account"===v&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Account Information"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"View your account details and manage your profile"})]}),(0,r.jsxs)("div",{className:"px-6 py-4",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.Z,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Name"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:null==w?void 0:null===(e=w.user)||void 0===e?void 0:e.name})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(g.Z,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Email"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:null==w?void 0:null===(t=w.user)||void 0===t?void 0:t.email})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(c.Z,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Role"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 capitalize",children:null==w?void 0:null===(f=w.user)||void 0===f?void 0:null===(s=f.role)||void 0===s?void 0:s.toLowerCase()})]})]})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(l.default,{href:"/profile",className:"text-indigo-600 hover:text-indigo-900 text-sm font-medium",children:"Edit Profile →"})})]})]})]})]})]})})}},3121:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))});t.Z=a},7233:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))});t.Z=a},9734:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))});t.Z=a},2548:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});t.Z=a},8690:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))});t.Z=a},338:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))});t.Z=a},7165:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))});t.Z=a}},function(e){e.O(0,[448,605,971,117,744],function(){return e(e.s=5660)}),_N_E=e.O()}]);